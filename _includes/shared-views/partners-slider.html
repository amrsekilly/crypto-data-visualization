<div class="ui stackable grid">
  <div class="fourteen wide centered column slider partners-slider">
    <!-- the partners list -->
    {% random site.partners partners %}
    {% for partner in partners %}
      <div class="column partner-div">
        <img src="{{ partner.logo }}" alt="{{ partner.name }}" class="ui large image">
      </div>
    {% endfor %}
  </div>
</div>


<script>
  $(document).ready(function () {
    // to randomize the start of the slides
    $.fn.randomize = function (selector) {
      var $elems = selector ? $(this).find(selector) : $(this).children(),
        $parents = $elems.parent();

      $parents.each(function () {
        $(this).children(selector).sort(function () {
          return Math.round(Math.random()) - 0.5;
        }).detach().appendTo(this);
      });
      return this;
    };

    // randomize the slides and then call slick
    $('.partners-slider').randomize('.partner-div');

    // the slider 
    $('.partners-slider')
      .slick({
        slidesToShow: 4,
        rows: 2,
        infinite: true,
        startSlide: 'random',
        autoplay: true,
        autoplaySpeed: 5000,
        speed: 1000,
        centerMode: true,
        centerPadding: 0,
        responsive: [{
          breakpoint: 1024,
          settings: {
            slidesToShow: 4,
            rows: 2,
          }
        }, {
          breakpoint: 640,
          settings: {
            slidesToShow: 2,
            rows: 2,
          }
        }, {
          breakpoint: 420,
          settings: {
            slidesToShow: 1,
            rows: 2,
          }
        }]
      });

      // force slidesToScroll in centerMode
    $('.partners-slider').slick('slickSetOption', 'slidesToScroll', 8, true);
  
  });
</script>